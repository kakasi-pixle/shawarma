<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>لوحة التحكم</title>
  <link rel="stylesheet" href="dashboard-styles.css">
  <style>
    /* تحسين تصميم الداشبورد وإضافة أزرار سرية */
    .secret-btn {
      background: #ff5722;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      color: white;
      font-size: 18px;
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: none;
      cursor: pointer;
    }
    .settings-icon {
      width: 30px;
      height: 30px;
      cursor: pointer;
      margin-left: 10px;
    }
    .new-btn {
      display: inline-block;
      padding: 10px 20px;
      margin: 5px;
      background: #28a745;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="header">
    <button class="icon-btn" onclick="showInfo()">
      <img src="computer-icon.png" alt="Computer Icon">
    </button>
    <div class="coins">
      <span id="coinCount">Coins: 0</span>
    </div>
    <!-- زر الإعدادات يظهر فقط إذا كان المستخدم أدمن -->
    <script>
      const currentUser = localStorage.getItem('currentUser');
      const users = JSON.parse(localStorage.getItem('users')) || {};
      if (users[currentUser] && users[currentUser].isAdmin) {
        document.write('<img src="settings-icon.png" alt="Settings" class="settings-icon" onclick="toggleAdminMode()">');
      }
    </script>
  </div>
  <div class="chat-container">
    <div id="chatBox" class="chat-box"></div>
    <div class="chat-input">
      <input type="text" id="messageInput" placeholder="اكتب رسالتك...">
      <button onclick="sendMessage()">إرسال</button>
      <button onclick="sendCoin()">إرسال عملة</button>
    </div>
  </div>

  <!-- أزرار إضافية للانتقال إلى الصفحات المختلفة -->
  <div style="text-align:center; margin:10px;">
    <a href="shop.html" class="new-btn">المتجر</a>
    <a href="items.html" class="new-btn">تجميع الأيتيمات</a>
    <a href="trade.html" class="new-btn">نظام تريد</a>
  </div>

  <section id="game-area" class="game-area">
    <h2>منطقة الألعاب</h2>
    <p>اضغط على زر تجميع العملات (مع كول داون).</p>
    <button id="collect-coins" onclick="collectCoins()">تجميع العملات</button>
    <p id="coin-count">رصيدك: 0 عملة</p>
    <!-- زر جديد داخل منطقة تجميع العملات يشبه زر المتجر -->
    <div style="margin-top:10px;">
      <a href="shop.html" class="new-btn">اذهب إلى المتجر</a>
    </div>
    <div id="win-animation" style="display: none;">🎉💰</div>
  </section>

  <!-- زر سري يظهر في وضع الأدمن -->
  <button class="secret-btn" id="adminSecretBtn" onclick="openAdminPanel()">⚙️</button>

  <script src="chat.js"></script>
  <script src="script.js"></script>
  <script>
    // دالة لتبديل وضع الأدمن من خلال زر الإعدادات
    function toggleAdminMode() {
      const secretBtn = document.getElementById('adminSecretBtn');
      secretBtn.style.display = (secretBtn.style.display === 'none' || secretBtn.style.display === '') ? 'block' : 'none';
    }
    // دالة لفتح لوحة الأدمن (توجه إلى admin.html)
    function openAdminPanel() {
      window.location.href = 'admin.html';
    }
  </script>
</body>
</html>
